(this.webpackJsonppizzapal=this.webpackJsonppizzapal||[]).push([[1],{107:function(e,t,n){"use strict";var c=n(144),i=n.n(c).a.create({baseURL:"https://pizzapal.herokuapp.com/"});t.a=i},108:function(e,t,n){"use strict";var c=n(20),i=n(0),o=n.n(i),r=n(66),a=n(194),s=n(2);t.a=function(e){var t=o.a.useState(!!e.error),n=Object(c.a)(t,2),i=n[0],l=n[1];return Object(s.jsxs)(r.a,{onClose:function(){return l(!1)},onOpen:function(){return l(!0)},open:i,children:[Object(s.jsx)(r.a.Header,{children:"Something went wrong"}),Object(s.jsx)(r.a.Content,{children:Object(s.jsx)(r.a.Description,{children:Object(s.jsx)("p",{children:e.error})})}),Object(s.jsx)(r.a.Actions,{children:Object(s.jsx)(a.a,{content:"Okay",onClick:function(){e.onClear(),l(!1)},color:"red"})})]})}},160:function(e,t,n){},162:function(e,t,n){},192:function(e,t,n){"use strict";n.r(t);var c,i=n(0),o=n.n(i),r=n(47),a=n.n(r),s=(n(160),n(26)),l=(n(161),n(20)),u=n(207),j=n(10),d=(n(162),n(208)),p=n(51),b=n.p+"static/media/logo.a8255238.png",h=n(2),g=function(e){var t=Object(i.useContext)(p.a);return Object(h.jsxs)(d.a,{color:"red",stackable:!0,inverted:!0,children:[Object(h.jsx)(d.a.Item,{children:Object(h.jsx)("img",{src:b,alt:"Pizza Pal Logo"})}),Object(h.jsx)(d.a.Item,{as:s.c,to:"/",exact:!0,children:"Pizza Pal"}),t.isLoggedIn&&Object(h.jsx)(d.a.Item,{as:s.c,to:"/orders/".concat(t.userId),children:"Your Orders"}),t.isLoggedIn&&Object(h.jsx)(d.a.Item,{as:s.c,to:"/users/".concat(t.userId),children:"Your Account"}),!t.isLoggedIn&&Object(h.jsx)(d.a.Menu,{position:"right",children:Object(h.jsx)(d.a.Item,{as:s.c,to:"/authenticate",children:"Signup/Login"})}),t.isLoggedIn&&Object(h.jsx)(d.a.Menu,{position:"right",children:Object(h.jsx)(d.a.Item,{as:s.b,to:"/",onClick:t.logout,children:"Log out"})})]})},O=n(96),x=n(209),m=n(107),f=n(196),v=n(104),k=n(146),I=n(92),C=function(e){return Object(h.jsxs)(x.a.Column,{mobile:4,computer:2,textAlign:"center",children:[Object(h.jsx)(k.a,{src:e.image,alt:e.alt,size:"tiny",centered:!0}),Object(h.jsxs)(I.a,{pointing:!0,children:["\u20ac ",e.price.toFixed(2)," "]})]})},z=function(e){return Object(h.jsxs)(x.a.Column,{width:12,children:[Object(h.jsx)(f.a,{color:"red",children:Object(h.jsx)(v.a,{as:"h2",textAlign:"center",color:"red",children:"Pizza Pal Menu"})}),Object(h.jsx)(x.a,{children:e.menu.map((function(e,t){return Object(h.jsx)(C,{image:e.image,alt:e.alt,price:e.price},e.id)}))})]})},S=n(195),T=n(194),P=n(44),L=function(e){return Object(h.jsxs)(x.a.Column,{mobile:4,computer:2,textAlign:"center",children:[Object(h.jsx)("p",{children:e.alt}),Object(h.jsxs)(T.a.Group,{size:"mini",children:[Object(h.jsx)(T.a,{color:"green",icon:!0,onClick:e.added,children:Object(h.jsx)(P.a,{name:"plus"})}),Object(h.jsx)(T.a,{color:"red",icon:!0,onClick:e.removed,children:Object(h.jsx)(P.a,{name:"minus"})})]})]})},w=function(e){return Object(h.jsxs)(x.a.Column,{width:8,children:[Object(h.jsx)(v.a,{as:"h2",textAlign:"center",className:"step",children:"Step 1: Choose your toppings"}),Object(h.jsx)(x.a,{children:e.menu.map((function(t,n){return Object(h.jsx)(L,{alt:t.alt,added:function(){return e.toppingAdded(t.id)},removed:function(){return e.toppingRemoved(t.id)}},t.id)}))})]})},y=n(76),A=n(66),D=function(e){var t=Object(i.useState)(!1),n=Object(l.a)(t,2),c=n[0],o=n[1];return Object(h.jsxs)(A.a,{onClose:function(){return o(!1)},onOpen:function(){return o(!0)},open:c,trigger:Object(h.jsx)(T.a,{color:"green",size:"large",children:"Order Now!"}),children:[Object(h.jsx)(A.a.Header,{children:"Confirm your choices:"}),Object(h.jsx)(A.a.Content,{children:Object(h.jsx)(y.a,{menu:e.menu,toppings:e.toppings,price:e.price})}),Object(h.jsxs)(A.a.Actions,{children:[Object(h.jsx)(T.a,{color:"red",onClick:function(){return o(!1)},children:"Go Back"}),Object(h.jsx)(T.a,{color:"green",disabled:e.disabled,onClick:function(){e.checkout(),o(!1)},children:"Check out"})]})]})},F=function(e){return Object(h.jsxs)(x.a.Column,{width:6,textAlign:"right",children:[Object(h.jsx)(v.a,{as:"h2",textAlign:"center",className:"step",children:"Step 2: Check out"}),Object(h.jsx)(y.a,{menu:e.menu,toppings:e.toppings,price:e.price}),Object(h.jsx)(D,{menu:e.menu,toppings:e.toppings,price:e.price,checkout:e.checkout,disabled:e.disabled})]})},M=function(e){var t=!Object(i.useContext)(p.a).isLoggedIn;return Object(h.jsx)(x.a.Row,{children:Object(h.jsxs)(S.a.Dimmable,{as:x.a,blurring:!0,dimmed:t,children:[Object(h.jsxs)(x.a.Row,{columns:2,centered:!0,children:[Object(h.jsx)(w,{menu:e.menu,toppingAdded:e.toppingAdded,toppingRemoved:e.toppingRemoved}),Object(h.jsx)(F,{menu:e.menu,toppings:e.chosenToppings,price:e.totalPrice,checkout:e.checkout,disabled:e.disabled})]}),Object(h.jsxs)(S.a,{active:t,children:[Object(h.jsx)(v.a,{as:"h2",inverted:!0,children:"Log in to start creating your pizza!"}),Object(h.jsx)(T.a,{as:s.b,to:"/authenticate",color:"red",size:"large",children:"Signup/Login"})]})]})})},N=n(68),R=n(108),E=function(e){var t=Object(i.useState)({toppings:[]}),n=Object(l.a)(t,2),c=n[0],o=n[1],r=Object(i.useState)({error:!1,errorMessage:null}),a=Object(l.a)(r,2),s=a[0],u=a[1],j=Object(i.useState)({isLoading:!0,loadFailed:!1}),d=Object(l.a)(j,2),p=d[0],b=d[1];Object(i.useEffect)((function(){m.a.get("/").then((function(e){var t=e.data.toppings.sort((function(e,t){return e.id-t.id}));o({toppings:t})})).catch((function(e){var t="";t=e.response?e.response.data.message:"There was a problem creating your order",u({error:!0,errorMessage:t}),b({isLoading:!1,loadFailed:c.loadFailed}),console.log(e.response)}))}),[]);var g=Object(i.useState)({totalPrice:e.location.state?e.location.state.order.totalPrice:5,chosenToppings:e.location.state?e.location.state.order.chosenToppings:[]}),f=Object(l.a)(g,2),v=f[0],k=f[1],I=!0;v.chosenToppings.length>0&&(I=!1);var C=s.error?Object(h.jsx)(R.a,{error:s.errorMessage,onClear:function(){u({error:!1,errorMessage:null}),b({isLoading:!1,loadFailed:!0})}}):Object(h.jsx)(N.a,{active:p.isLoading});return c.toppings.length>0?C=Object(h.jsxs)(x.a,{divided:"vertically",stackable:!0,children:[Object(h.jsx)(x.a.Row,{centered:!0,children:Object(h.jsx)(z,{menu:c.toppings})}),Object(h.jsx)(M,{menu:c.toppings,toppingAdded:function(e){var t=Object(O.a)({},v),n=c.toppings.findIndex((function(t){return t.id===e})),i=t.chosenToppings.findIndex((function(t){return t.id===e}));if(i>-1)t.chosenToppings[i].count++;else{var o={id:c.toppings[n].id,name:c.toppings[n].alt,price:c.toppings[n].price,count:1};t.chosenToppings.push(o)}var r=v.totalPrice+c.toppings[n].price;k({totalPrice:r,chosenToppings:t.chosenToppings})},toppingRemoved:function(e){var t=Object(O.a)({},v),n=t.chosenToppings.findIndex((function(t){return t.id===e})),c=t.totalPrice;n>=0&&(c-=t.chosenToppings[n].price,t.chosenToppings[n].count--,t.chosenToppings[n].count<1&&t.chosenToppings.splice(n,1)),k({totalPrice:c,chosenToppings:t.chosenToppings})},chosenToppings:v.chosenToppings,totalPrice:v.totalPrice,checkout:function(){e.history.push({pathname:"place-order",state:{order:v,menu:c.toppings}})},disabled:I})]}):p.loadFailed&&(C=Object(h.jsx)("p",{children:"We're having some issues loading the menu... Please try again later."})),Object(h.jsx)("div",{children:C})},J=o.a.lazy((function(){return n.e(9).then(n.bind(null,231))})),B=o.a.lazy((function(){return Promise.all([n.e(0),n.e(7)]).then(n.bind(null,232))})),Y=o.a.lazy((function(){return n.e(6).then(n.bind(null,225))})),G=o.a.lazy((function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,226))})),H=o.a.lazy((function(){return n.e(4).then(n.bind(null,233))})),U=o.a.lazy((function(){return Promise.all([n.e(0),n.e(8)]).then(n.bind(null,227))})),W=function(e){var t,n=Object(i.useState)(!1),o=Object(l.a)(n,2),r=o[0],a=o[1],s=Object(i.useState)(!1),d=Object(l.a)(s,2),b=d[0],O=d[1],x=Object(i.useState)(),m=Object(l.a)(x,2),f=m[0],v=m[1],k=Object(j.f)(),I=Object(i.useCallback)((function(e,t,n){a(t),O(e);var c=n||new Date((new Date).getTime()+36e5);v(c),localStorage.setItem("userData",JSON.stringify({userId:e,token:t,expiration:c.toISOString()}))}),[]),C=Object(i.useCallback)((function(){a(null),v(null),O(null),localStorage.removeItem("userData"),k.push("/")}),[]);return Object(i.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userData"));e&&e.token&&I(e.userId,e.token)}),[I]),Object(i.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userData"));e&&e.token&&new Date(e.expiration)>new Date&&I(e.userId,e.token,new Date(e.expiration))}),[I]),Object(i.useEffect)((function(){if(r&&f){var e=f.getTime()-(new Date).getTime();c=setTimeout(C,e)}else clearTimeout(c)}),[r,C,f]),t=r?Object(h.jsxs)(j.c,{children:[Object(h.jsx)(j.a,{path:"/",exact:!0,component:E}),Object(h.jsx)(j.a,{path:"/orders/:uid",component:J}),Object(h.jsx)(j.a,{path:"/place-order",component:B}),Object(h.jsx)(j.a,{path:"/order-success",component:Y}),Object(h.jsx)(j.a,{path:"/users/:uid",component:H}),Object(h.jsx)(j.a,{path:"/update-account",component:U})]}):Object(h.jsxs)(j.c,{children:[Object(h.jsx)(j.a,{path:"/",exact:!0,component:E}),Object(h.jsx)(j.a,{path:"/authenticate",component:G})]}),Object(h.jsx)(p.a.Provider,{value:{isLoggedIn:!!r,token:r,userId:b,login:I,logout:C},children:Object(h.jsxs)(u.a,{children:[Object(h.jsx)(g,{}),Object(h.jsx)(i.Suspense,{fallback:Object(h.jsx)("div",{children:Object(h.jsx)(N.a,{active:"true"})}),children:t})]})})};var q=function(){return Object(h.jsx)(s.a,{children:Object(h.jsx)(W,{})})},K=function(e){e&&e instanceof Function&&n.e(10).then(n.bind(null,228)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,o=t.getLCP,r=t.getTTFB;n(e),c(e),i(e),o(e),r(e)}))};a.a.render(Object(h.jsx)(o.a.StrictMode,{children:Object(h.jsx)(q,{})}),document.getElementById("root")),K()},51:function(e,t,n){"use strict";var c=n(0),i=Object(c.createContext)({isLoggedIn:!1,login:function(){},logout:function(){}});t.a=i},68:function(e,t,n){"use strict";n(0);var c=n(196),i=n(195),o=n(193),r=n(2);t.a=function(e){return Object(r.jsx)(c.a,{children:Object(r.jsx)(i.a,{active:e.active,inverted:!0,children:Object(r.jsx)(o.a,{size:"large",children:"Loading"})})})}},76:function(e,t,n){"use strict";n(0);var c=n(104),i=n(147),o=n(2);t.a=function(e){var t=null;return t=e.toppings.length>0?Object(o.jsxs)("div",{children:[Object(o.jsx)(c.a,{as:"h3",children:"Your Pizza:"}),Object(o.jsx)(i.a,{divided:!0,verticalAlign:"middle",children:e.toppings.map((function(e){return Object(o.jsxs)(i.a.Item,{children:[e.name,": ",e.count]},e.id)}))}),Object(o.jsxs)(c.a,{as:"h4",className:"h4margin",children:["Total Price: \u20ac ",e.price.toFixed(2)]})]}):Object(o.jsx)("div",{children:Object(o.jsx)(c.a,{as:"h4",className:"h4margin",children:"Start adding some toppings!"})}),Object(o.jsx)("div",{children:t})}}},[[192,2,3]]]);
//# sourceMappingURL=main.4e2359df.chunk.js.map