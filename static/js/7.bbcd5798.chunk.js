(this.webpackJsonppizzapal=this.webpackJsonppizzapal||[]).push([[7],{232:function(e,r,t){"use strict";t.r(r);var a,n=t(96),o=t(20),s=t(0),i=t.n(s),l=t(209),u=t(196),d=t(104),c=t(194),p=t(230),m=t(224),h=t(10),f=new Uint8Array(16);function b(){if(!a&&!(a="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return a(f)}var g=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var v=function(e){return"string"===typeof e&&g.test(e)},j=[],y=0;y<256;++y)j.push((y+256).toString(16).substr(1));var O=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=(j[e[r+0]]+j[e[r+1]]+j[e[r+2]]+j[e[r+3]]+"-"+j[e[r+4]]+j[e[r+5]]+"-"+j[e[r+6]]+j[e[r+7]]+"-"+j[e[r+8]]+j[e[r+9]]+"-"+j[e[r+10]]+j[e[r+11]]+j[e[r+12]]+j[e[r+13]]+j[e[r+14]]+j[e[r+15]]).toLowerCase();if(!v(t))throw TypeError("Stringified UUID is invalid");return t};var x=function(e,r,t){var a=(e=e||{}).random||(e.rng||b)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,r){t=t||0;for(var n=0;n<16;++n)r[t+n]=a[n];return r}return O(a)},C=t(107),k=t(51),w=t(76),q=t(108),S=t(2);r.default=Object(h.g)((function(e){var r=Object(s.useContext)(k.a),t=Object(s.useState)({totalPrice:e.location.state.order.totalPrice,chosenToppings:e.location.state.order.chosenToppings}),a=Object(o.a)(t,2),h=a[0],f=(a[1],Object(s.useState)({error:!1,errorMessage:null})),b=Object(o.a)(f,2),g=b[0],v=b[1],j=Object(s.useState)({details:{name:"",phone:"",method:"",address:""}}),y=Object(o.a)(j,2),O=y[0],A=y[1],D=Object(s.useState)({rules:[{id:"form-input-name",message:"Please enter your name (letters and spaces only, min length 2)",required:!0,valid:!1},{id:"form-input-phone",message:"Please enter your phone number (area code and number)",required:!0,valid:!1},{id:"form-input-method",message:"Please choose collection or delivery",required:!0,valid:!1},{id:"form-input-address",message:"Please enter your delivery address (house number and street)",required:!1,valid:!0}],formValid:!1}),P=Object(o.a)(D,2),M=P[0],V=P[1],z=Object(s.useState)({name:null,phone:null,method:null,address:null}),I=Object(o.a)(z,2),T=I[0],R=I[1],F=function(e,r,t){var a=Object(n.a)({},M),o=a.rules.findIndex((function(e){return e.id===r})),s=null;if(a.rules[o].required&&"input"===t&&""===e.trim())s=a.rules[o].message,a.rules[o].valid=!1;else if("form-input-phone"===r){/^[+]?[(]?[0-9]{3,5}[)]?[-\s.]?[0-9]{6,7}$/.test(e)?a.rules[o].valid=!0:(a.rules[o].valid=!1,s=a.rules[o].message)}else if("form-input-name"===r){/^[A-Za-z\s]{2,30}$/.test(e)?a.rules[o].valid=!0:(a.rules[o].valid=!1,s=a.rules[o].message)}else if("Delivery"===e)a.rules[o].valid=!0,a.rules[3].valid=!1,a.rules[3].required=!0;else if("Collection"===e)a.rules[o].valid=!0,a.rules[3].required=!1,a.rules[3].valid=!0;else if(a.rules[o].required&&"form-input-address"===r){/^[#.0-9a-zA-Z\s,-]{2,50}$/.test(e)?a.rules[o].valid=!0:(a.rules[o].valid=!1,s=a.rules[o].message)}else s=null,a.rules[o].valid=!0;var i=Object(n.a)({},T);switch(r){case"form-input-name":i.name=s;break;case"form-input-phone":i.phone=s;break;case"form-input-method":i.method=s;break;case"form-input-address":i.address=s}R(Object(n.a)({},i));var l=!0;for(var u in a.rules)a.rules[u].valid||(l=!1);V({rules:a.rules,formValid:l})},J=function(e,r,t){var a=O.details;switch(r){case"form-input-name":a.name=e.target.value,F(e.target.value,r,t);break;case"form-input-phone":a.phone=e.target.value,F(e.target.value,r,t);break;case"form-input-method":a.method=e.target.textContent,F(e.target.textContent,r,t);break;case"form-input-address":a.address=e.target.value,F(e.target.value,r,t)}A({details:a})},$=!M.formValid,E=null;return E=g.error?Object(S.jsx)(q.a,{error:g.errorMessage,onClear:function(){v({error:!1,errorMessage:null})}}):Object(S.jsx)(l.a,{children:Object(S.jsxs)(l.a.Row,{columns:2,children:[Object(S.jsx)(l.a.Column,{width:6,children:Object(S.jsxs)(u.a,{color:"red",children:[Object(S.jsx)(d.a,{as:"h2",textAlign:"center",color:"red",children:"Confirm your order:"}),Object(S.jsx)(w.a,{menu:e.location.state.menu,toppings:e.location.state.order.chosenToppings,price:e.location.state.order.totalPrice}),Object(S.jsx)(c.a,{color:"red",onClick:function(){e.history.push({pathname:"/",state:{order:h}})},children:"Go Back"})]})}),Object(S.jsx)(l.a.Column,{width:10,children:Object(S.jsxs)(u.a,{color:"red",children:[Object(S.jsx)(d.a,{as:"h2",textAlign:"center",color:"red",children:"Enter your details:"}),Object(S.jsxs)(p.a,{id:"form",children:[Object(S.jsx)(p.a.Input,{error:T.name,required:!0,label:"Name",placeholder:"Name",id:"form-input-name",onChange:function(e){return J(e,"form-input-name","input")}}),Object(S.jsx)(p.a.Input,{error:T.phone,required:!0,label:"Phone",placeholder:"Phone e.g. 086-1234567",id:"form-input-phone",onChange:function(e){return J(e,"form-input-phone","input")}}),Object(S.jsx)(p.a.Field,{control:m.a,required:!0,error:T.method,label:"Delivery method",options:[{key:"c",text:"Collection",value:"collection"},{key:"d",text:"Delivery",value:"delivery"}],placeholder:"Collection or Delivery",id:"form-input-method",onChange:function(e){return J(e,"form-input-method","select")}}),Object(S.jsx)(p.a.Input,{error:T.address,required:M.rules[3].required,fluid:!0,label:"Address",placeholder:"Address",id:"form-input-address",onChange:function(e){return J(e,"form-input-address","input")}}),Object(S.jsx)(c.a,{type:"submit",color:"green",disabled:$,onClick:function(){var t=h;t.id=x();var a=new Date,n=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][a.getDay()],o=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][a.getMonth()],s=n+" "+a.getDate()+" "+o+" "+a.getFullYear();t.date=s,t.details=O.details,t.userId=r.userId,C.a.post("/checkout",t,{headers:{Authorization:"Bearer "+r.token}}).then((function(r){e.history.push("/order-success")})).catch((function(e){var r="";r=e.response?e.response.data.message:"There was a problem creating your order",v({error:!0,errorMessage:r})}))},children:"Submit"})]})]})})]})}),Object(S.jsx)(i.a.Fragment,{children:E})}))}}]);
//# sourceMappingURL=7.bbcd5798.chunk.js.map